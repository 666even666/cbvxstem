<div class = "search_table">
<p id="notice"><%= notice %></p>
<div>
<h1 style="text-align: center">Medications</h1>
<br>
</div>
<table class = "table table-striped col-md-12">

  <thead>
    <tr>
      <th>Provider</th>
      <th>Directions</th>
      <th>Days</th>
      <th>Description</th>
      <th colspan="2">Patient Name</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @medications.each do |medication| %>
      <tr>
        <td><%= medication.provider %></td>
        <td><%= medication.directions.length > 10 ? medication.directions[0..10] + "..." : medication.directions %></td>
        <td><%= medication.days %></td>
        <td><%= medication.description.length > 15 ? medication.description[0..15] + "..." : medication.description %></td>
        <td><%= medication.user_holder.first_name %></td>
        <td><%= medication.user_holder.last_name %></td>
        <% if can? :read, medication %><td><%= link_to 'Details', [@user_holder, medication] %></td> <% end %>
        <% if can? :update, medication %><td><%= link_to 'Edit', edit_user_holder_medication_path(@user_holder, medication) %></td><% end %>
        <% if can? :destroy, medication %><td><%= link_to 'Destroy', [@user_holder, medication], method: :delete, data: { confirm: 'Are you sure?' } %></td><% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<% #HACK:: as long as database has one record, it will be able to check the ActiveRecord %>
<% @medication = Medication.all.first %>
<% if can? :create, @medication %>
  <button class="col-md-1.5 btn btn-success">
    <%= link_to "Add Medication", new_user_holder_medication_path(@user_holder) %>
  </button>
<% end %>
